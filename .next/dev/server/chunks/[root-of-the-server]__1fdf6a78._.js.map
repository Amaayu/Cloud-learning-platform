{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 52, "column": 0}, "map": {"version":3,"sources":["file:///Users/aayu/Desktop/online%20LSM/cse-learning-platform/src/lib/db.ts"],"sourcesContent":["import mongoose from 'mongoose';\n\nconst MONGODB_URI = process.env.MONGODB_URI!;\n\nif (!MONGODB_URI) {\n  throw new Error('Please define the MONGODB_URI environment variable inside .env.local');\n}\n\nlet cached = global.mongoose;\n\nif (!cached) {\n  cached = global.mongoose = { conn: null, promise: null };\n}\n\nasync function dbConnect() {\n  if (cached.conn) {\n    return cached.conn;\n  }\n\n  if (!cached.promise) {\n    const opts = {\n      bufferCommands: false,\n    };\n\n    cached.promise = mongoose.connect(MONGODB_URI, opts).then((mongoose) => {\n      return mongoose;\n    });\n  }\n\n  try {\n    cached.conn = await cached.promise;\n  } catch (e) {\n    cached.promise = null;\n    throw e;\n  }\n\n  return cached.conn;\n}\n\nexport default dbConnect;"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,cAAc,QAAQ,GAAG,CAAC,WAAW;AAE3C,IAAI,CAAC,aAAa;IAChB,MAAM,IAAI,MAAM;AAClB;AAEA,IAAI,SAAS,yDAAO,QAAQ;AAE5B,IAAI,CAAC,QAAQ;IACX,SAAS,yDAAO,QAAQ,GAAG;QAAE,MAAM;QAAM,SAAS;IAAK;AACzD;AAEA,eAAe;IACb,IAAI,OAAO,IAAI,EAAE;QACf,OAAO,OAAO,IAAI;IACpB;IAEA,IAAI,CAAC,OAAO,OAAO,EAAE;QACnB,MAAM,OAAO;YACX,gBAAgB;QAClB;QAEA,OAAO,OAAO,GAAG,oHAAQ,CAAC,OAAO,CAAC,aAAa,MAAM,IAAI,CAAC,CAAC;YACzD,OAAO;QACT;IACF;IAEA,IAAI;QACF,OAAO,IAAI,GAAG,MAAM,OAAO,OAAO;IACpC,EAAE,OAAO,GAAG;QACV,OAAO,OAAO,GAAG;QACjB,MAAM;IACR;IAEA,OAAO,OAAO,IAAI;AACpB;uCAEe","debugId":null}},
    {"offset": {"line": 94, "column": 0}, "map": {"version":3,"sources":["file:///Users/aayu/Desktop/online%20LSM/cse-learning-platform/src/models/User.ts"],"sourcesContent":["import mongoose from \"mongoose\";\n\nexport interface IUser extends mongoose.Document {\n  name: string;\n  email: string;\n  password: string;\n  role: \"user\" | \"admin\";\n  bookmarks: mongoose.Types.ObjectId[];\n  progress: {\n    subjectId: mongoose.Types.ObjectId;\n    completedTopics: mongoose.Types.ObjectId[];\n    completedUnits: mongoose.Types.ObjectId[];\n    progressPercentage: number;\n  }[];\n  theme: \"light\" | \"dark\" | \"system\";\n  createdAt: Date;\n  updatedAt: Date;\n}\n\nconst UserSchema = new mongoose.Schema(\n  {\n    name: {\n      type: String,\n      required: [true, \"Please provide a name\"],\n      maxlength: [60, \"Name cannot be more than 60 characters\"],\n    },\n    email: {\n      type: String,\n      required: [true, \"Please provide an email\"],\n      unique: true,\n      lowercase: true,\n    },\n    password: {\n      type: String,\n      required: [true, \"Please provide a password\"],\n      minlength: [6, \"Password must be at least 6 characters\"],\n    },\n    role: {\n      type: String,\n      enum: [\"user\", \"admin\"],\n      default: \"user\",\n    },\n    bookmarks: [\n      {\n        type: mongoose.Schema.Types.ObjectId,\n        ref: \"Topic\",\n      },\n    ],\n    progress: [\n      {\n        subjectId: {\n          type: mongoose.Schema.Types.ObjectId,\n          ref: \"Subject\",\n        },\n        completedTopics: [\n          {\n            type: mongoose.Schema.Types.ObjectId,\n            ref: \"Topic\",\n          },\n        ],\n        completedUnits: [\n          {\n            type: mongoose.Schema.Types.ObjectId,\n            ref: \"Unit\",\n          },\n        ],\n        progressPercentage: {\n          type: Number,\n          default: 0,\n        },\n      },\n    ],\n    theme: {\n      type: String,\n      enum: [\"light\", \"dark\", \"system\"],\n      default: \"system\",\n    },\n  },\n  {\n    timestamps: true,\n  }\n);\n\nexport default mongoose.models.User ||\n  mongoose.model<IUser>(\"User\", UserSchema);\n"],"names":[],"mappings":";;;;AAAA;;AAmBA,MAAM,aAAa,IAAI,oHAAQ,CAAC,MAAM,CACpC;IACE,MAAM;QACJ,MAAM;QACN,UAAU;YAAC;YAAM;SAAwB;QACzC,WAAW;YAAC;YAAI;SAAyC;IAC3D;IACA,OAAO;QACL,MAAM;QACN,UAAU;YAAC;YAAM;SAA0B;QAC3C,QAAQ;QACR,WAAW;IACb;IACA,UAAU;QACR,MAAM;QACN,UAAU;YAAC;YAAM;SAA4B;QAC7C,WAAW;YAAC;YAAG;SAAyC;IAC1D;IACA,MAAM;QACJ,MAAM;QACN,MAAM;YAAC;YAAQ;SAAQ;QACvB,SAAS;IACX;IACA,WAAW;QACT;YACE,MAAM,oHAAQ,CAAC,MAAM,CAAC,KAAK,CAAC,QAAQ;YACpC,KAAK;QACP;KACD;IACD,UAAU;QACR;YACE,WAAW;gBACT,MAAM,oHAAQ,CAAC,MAAM,CAAC,KAAK,CAAC,QAAQ;gBACpC,KAAK;YACP;YACA,iBAAiB;gBACf;oBACE,MAAM,oHAAQ,CAAC,MAAM,CAAC,KAAK,CAAC,QAAQ;oBACpC,KAAK;gBACP;aACD;YACD,gBAAgB;gBACd;oBACE,MAAM,oHAAQ,CAAC,MAAM,CAAC,KAAK,CAAC,QAAQ;oBACpC,KAAK;gBACP;aACD;YACD,oBAAoB;gBAClB,MAAM;gBACN,SAAS;YACX;QACF;KACD;IACD,OAAO;QACL,MAAM;QACN,MAAM;YAAC;YAAS;YAAQ;SAAS;QACjC,SAAS;IACX;AACF,GACA;IACE,YAAY;AACd;uCAGa,oHAAQ,CAAC,MAAM,CAAC,IAAI,IACjC,oHAAQ,CAAC,KAAK,CAAQ,QAAQ","debugId":null}},
    {"offset": {"line": 211, "column": 0}, "map": {"version":3,"sources":["file:///Users/aayu/Desktop/online%20LSM/cse-learning-platform/src/lib/auth.ts"],"sourcesContent":["import bcrypt from 'bcryptjs';\nimport jwt from 'jsonwebtoken';\n\nconst JWT_SECRET = process.env.JWT_SECRET || 'your-secret-key';\n\nexport const hashPassword = async (password: string): Promise<string> => {\n  const salt = await bcrypt.genSalt(12);\n  return bcrypt.hash(password, salt);\n};\n\nexport const comparePassword = async (password: string, hashedPassword: string): Promise<boolean> => {\n  return bcrypt.compare(password, hashedPassword);\n};\n\nexport const generateToken = (userId: string): string => {\n  return jwt.sign({ userId }, JWT_SECRET, { expiresIn: '7d' });\n};\n\nexport const verifyToken = (token: string): any => {\n  try {\n    return jwt.verify(token, JWT_SECRET);\n  } catch (error) {\n    return null;\n  }\n};"],"names":[],"mappings":";;;;;;;;;;AAAA;AACA;;;AAEA,MAAM,aAAa,QAAQ,GAAG,CAAC,UAAU,IAAI;AAEtC,MAAM,eAAe,OAAO;IACjC,MAAM,OAAO,MAAM,8IAAM,CAAC,OAAO,CAAC;IAClC,OAAO,8IAAM,CAAC,IAAI,CAAC,UAAU;AAC/B;AAEO,MAAM,kBAAkB,OAAO,UAAkB;IACtD,OAAO,8IAAM,CAAC,OAAO,CAAC,UAAU;AAClC;AAEO,MAAM,gBAAgB,CAAC;IAC5B,OAAO,kJAAG,CAAC,IAAI,CAAC;QAAE;IAAO,GAAG,YAAY;QAAE,WAAW;IAAK;AAC5D;AAEO,MAAM,cAAc,CAAC;IAC1B,IAAI;QACF,OAAO,kJAAG,CAAC,MAAM,CAAC,OAAO;IAC3B,EAAE,OAAO,OAAO;QACd,OAAO;IACT;AACF","debugId":null}},
    {"offset": {"line": 251, "column": 0}, "map": {"version":3,"sources":["file:///Users/aayu/Desktop/online%20LSM/cse-learning-platform/src/app/api/auth/login/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from 'next/server'\nimport dbConnect from '@/lib/db'\nimport User from '@/models/User'\nimport { comparePassword, generateToken } from '@/lib/auth'\n\nexport async function POST(request: NextRequest) {\n  try {\n    await dbConnect()\n\n    const { email, password } = await request.json()\n\n    // Validate input\n    if (!email || !password) {\n      return NextResponse.json(\n        { message: 'Please provide email and password' },\n        { status: 400 }\n      )\n    }\n\n    // Find user\n    const user = await User.findOne({ email: email.toLowerCase() })\n    if (!user) {\n      return NextResponse.json(\n        { message: 'Invalid email or password' },\n        { status: 401 }\n      )\n    }\n\n    // Check password\n    const isPasswordValid = await comparePassword(password, user.password)\n    if (!isPasswordValid) {\n      return NextResponse.json(\n        { message: 'Invalid email or password' },\n        { status: 401 }\n      )\n    }\n\n    // Generate token\n    const token = generateToken(user._id.toString())\n\n    return NextResponse.json({\n      message: 'Login successful',\n      token,\n      user: {\n        id: user._id,\n        name: user.name,\n        email: user.email,\n        role: user.role,\n      },\n    })\n  } catch (error) {\n    console.error('Login error:', error)\n    return NextResponse.json(\n      { message: 'Internal server error' },\n      { status: 500 }\n    )\n  }\n}"],"names":[],"mappings":";;;;AAAA;AACA;AACA;AACA;;;;;AAEO,eAAe,KAAK,OAAoB;IAC7C,IAAI;QACF,MAAM,IAAA,6HAAS;QAEf,MAAM,EAAE,KAAK,EAAE,QAAQ,EAAE,GAAG,MAAM,QAAQ,IAAI;QAE9C,iBAAiB;QACjB,IAAI,CAAC,SAAS,CAAC,UAAU;YACvB,OAAO,gJAAY,CAAC,IAAI,CACtB;gBAAE,SAAS;YAAoC,GAC/C;gBAAE,QAAQ;YAAI;QAElB;QAEA,YAAY;QACZ,MAAM,OAAO,MAAM,kIAAI,CAAC,OAAO,CAAC;YAAE,OAAO,MAAM,WAAW;QAAG;QAC7D,IAAI,CAAC,MAAM;YACT,OAAO,gJAAY,CAAC,IAAI,CACtB;gBAAE,SAAS;YAA4B,GACvC;gBAAE,QAAQ;YAAI;QAElB;QAEA,iBAAiB;QACjB,MAAM,kBAAkB,MAAM,IAAA,uIAAe,EAAC,UAAU,KAAK,QAAQ;QACrE,IAAI,CAAC,iBAAiB;YACpB,OAAO,gJAAY,CAAC,IAAI,CACtB;gBAAE,SAAS;YAA4B,GACvC;gBAAE,QAAQ;YAAI;QAElB;QAEA,iBAAiB;QACjB,MAAM,QAAQ,IAAA,qIAAa,EAAC,KAAK,GAAG,CAAC,QAAQ;QAE7C,OAAO,gJAAY,CAAC,IAAI,CAAC;YACvB,SAAS;YACT;YACA,MAAM;gBACJ,IAAI,KAAK,GAAG;gBACZ,MAAM,KAAK,IAAI;gBACf,OAAO,KAAK,KAAK;gBACjB,MAAM,KAAK,IAAI;YACjB;QACF;IACF,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,gBAAgB;QAC9B,OAAO,gJAAY,CAAC,IAAI,CACtB;YAAE,SAAS;QAAwB,GACnC;YAAE,QAAQ;QAAI;IAElB;AACF","debugId":null}}]
}